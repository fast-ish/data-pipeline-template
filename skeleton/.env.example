# Pipeline Configuration
ENVIRONMENT=development
PIPELINE_NAME=${{values.name}}

# AWS
AWS_REGION=us-east-1

{%- if values.sourceType == "s3" or values.sinkType == "s3" %}
# S3
S3_BUCKET=your-bucket-name
S3_PREFIX=data
{%- endif %}

{%- if values.sourceType == "postgres" or values.sinkType == "postgres" %}
# PostgreSQL
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DATABASE=your_database
POSTGRES_USER=your_user
POSTGRES_PASSWORD=your_password
{%- endif %}

{%- if values.sourceType == "redshift" or values.sinkType == "redshift" %}
# Redshift
REDSHIFT_HOST=your-cluster.region.redshift.amazonaws.com
REDSHIFT_PORT=5439
REDSHIFT_DATABASE=your_database
REDSHIFT_USER=your_user
REDSHIFT_PASSWORD=your_password
{%- endif %}

{%- if values.sinkType == "snowflake" %}
# Snowflake
SNOWFLAKE_ACCOUNT=your_account
SNOWFLAKE_USER=your_user
SNOWFLAKE_PASSWORD=your_password
SNOWFLAKE_WAREHOUSE=your_warehouse
SNOWFLAKE_DATABASE=your_database
SNOWFLAKE_SCHEMA=PUBLIC
{%- endif %}

{%- if values.sinkType == "bigquery" %}
# BigQuery
BIGQUERY_PROJECT=your-project
BIGQUERY_DATASET=your_dataset
{%- endif %}

{%- if values.sourceType == "kafka" %}
# Kafka
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_TOPIC=your-topic
KAFKA_CONSUMER_GROUP=${{values.name}}
# Authentication (optional)
KAFKA_SECURITY_PROTOCOL=PLAINTEXT
# For SASL auth, set KAFKA_SECURITY_PROTOCOL=SASL_SSL and:
# KAFKA_SASL_MECHANISM=SCRAM-SHA-512
# KAFKA_SASL_USERNAME=your-username
# KAFKA_SASL_PASSWORD=your-password
{%- endif %}

{%- if values.sourceType == "msk" %}
# Amazon MSK
MSK_BOOTSTRAP_SERVERS=b-1.your-cluster.region.amazonaws.com:9098,b-2.your-cluster.region.amazonaws.com:9098
MSK_TOPIC=your-topic
MSK_CONSUMER_GROUP=${{values.name}}
# Authentication: "iam" (recommended) or "sasl_scram"
MSK_AUTH_MECHANISM=iam
# For SASL/SCRAM auth (credentials from AWS Secrets Manager):
# MSK_SASL_USERNAME=your-username
# MSK_SASL_PASSWORD=your-password
{%- endif %}

{%- if values.sourceType == "kinesis" %}
# Kinesis
KINESIS_STREAM_NAME=your-stream
{%- endif %}

{%- if values.sinkType == "elasticsearch" %}
# Elasticsearch
ELASTICSEARCH_HOST=http://localhost:9200
ELASTICSEARCH_INDEX=your-index
{%- endif %}

{%- if values.sourceType == "api" %}
# API Source
API_BASE_URL=https://api.example.com
API_KEY=your-api-key
{%- endif %}

# OpenTelemetry (Grafana)
OTEL_SERVICE_NAME=${{values.name}}
OTEL_SERVICE_VERSION=0.1.0
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_TRACES_EXPORTER=otlp
OTEL_METRICS_EXPORTER=otlp
OTEL_LOGS_EXPORTER=otlp

{%- if values.notifications == "slack" %}
# Slack Notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/xxx
SLACK_CHANNEL=#data-alerts
{%- endif %}

{%- if values.notifications == "sns" %}
# SNS Notifications
SNS_TOPIC_ARN=arn:aws:sns:region:account:topic
{%- endif %}
